<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Profile</title>
    <div th:replace="fragments.html :: csrf-header"></div>
    <div th:replace="fragments.html :: headerfiles"></div>
    <div th:replace="fragments.html :: footer-headerfiles"></div>
</head>
<body class="bg-light">
<header th:replace="fragments.html :: nav"></header>
<main class="container content pb-3">
    <div class="row" style="display:none;">
        <div class="text-center mx-auto alert alert-success" id="info-alert">
            Your account details have been updated successfully.
        </div>
    </div>
    <h4 class="mb-4">Edit Profile</h4>
    <form sec:authorize="isAuthenticated()" role="form" th:object="${user}" autocomplete="on">
        <div class="form-group row has-danger d-flex align-items-center">
            <label for="username" class="col-md-2 col-form-label">Username</label>
            <div class="col-md-6 input-group">
                <input type="text" class="form-control" th:field="${userProperties.username}" id="username"
                       name="username" placeholder="Username" required autofocus autocomplete="username">
                <div class="input-group-append">
                    <span class="input-group-text">#<span th:text="${userProperties.usernameNr}"></span></span>
                </div>
            </div>
            <div class="col-md-4 text-lg-left text-center my-auto" style="display:none;">
                <div class="form-control-feedback text-danger" id="username-error"></div>
            </div>
        </div>

        <div class="form-group row has-danger d-flex align-items-center">
            <label for="email" class="col-md-2 col-form-label">Email</label>
            <div class="col-md-6">
                <input type="email" class="form-control" th:field="${userProperties.email}" id="email" name="email"
                       placeholder="you@example.com" required autocomplete="email">
            </div>
            <div class="col-md-4 text-lg-left text-center my-auto" style="display:none;">
                <div class="form-control-feedback text-danger" id="email-error"></div>
            </div>
        </div>

        <div class="form-group row has-danger d-flex align-items-center">
            <label for="password" class="col-md-2 col-form-label">Change Password</label>
            <div class="col-md-6">
                <input type="password" class="form-control" th:field="*{password}" id="password" name="password"
                       placeholder="New Password" autocomplete="new-password">
            </div>
            <div class="col-md-4 text-lg-left text-center my-auto" style="display:none;">
                <div class="form-control-feedback text-danger" id="password-error"></div>
            </div>
        </div>

        <div class="form-group row has-danger d-flex align-items-center">
            <label for="confirmPassword" class="col-md-2 col-form-label">Confirm Password</label>
            <div class="col-md-6">
                <input type="password" class="form-control" th:field="*{confirmPassword}" id="confirmPassword"
                       name="confirmPassword" placeholder="Confirm New Password" autocomplete="new-password">
            </div>
            <div class="col-md-4 text-lg-left text-center my-auto" style="display:none;">
                <div class="form-control-feedback text-danger" id="confirmPassword-error"></div>
            </div>
        </div>

        <div class="form-group row has-danger d-flex align-items-center">
            <label for="currentPassword" class="col-md-2 col-form-label">Password</label>
            <div class="col-md-6">
                <input type="password" class="form-control" th:field="*{currentPassword}" id="currentPassword"
                       name="currentPassword" placeholder="********" required autocomplete="current-password">
            </div>
            <div class="col-md-4 text-lg-left text-center my-auto" style="display:none;">
                <div class="form-control-feedback text-danger" id="currentPassword-error"></div>
            </div>
        </div>

        <div class="form-group row">
            <label class="col-md-2 col-form-label"></label>
            <div class="col-md-6">
                <input type="reset" class="btn btn-secondary" id="cancel-btn" value="Cancel">
                <input type="button" class="btn btn-primary" id="save-btn" value="Save">
            </div>
            <div class="col-md-4"></div>
        </div>

        <input type="hidden" name="temporary-fix" value="ignore">
    </form>
</main>

<footer th:replace="fragments.html :: footer"></footer>
<footer th:replace="fragments.html :: ajax-jquery"></footer>
<footer th:replace="fragments.html :: nav-script"></footer>
<script src="#" th:src="@{~/js/profile.js}"></script>
</body>
</html>